<!DOCTYPE html>
<html dir="ltr" lang="en-US">

<!-- Mirrored from www.mpyprojects.com/software/mpy-language/mpy_functions/pulse-functions/ by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 03 Apr 2013 03:34:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Mpy Projects  |  Pulse Functions</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index, follow" />
<link rel="stylesheet" type="text/css" href="../../../../wp-content/themes/swatch/style.css" media="screen" />
<link rel="pingback" href="../../../../xmlrpc.php" />

<link rel="alternate" type="application/rss+xml" title="Mpy Projects &raquo; Feed" href="../../../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Mpy Projects &raquo; Comments Feed" href="../../../../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Mpy Projects &raquo; Pulse Functions Comments Feed" href="feed/index.html" />
<link rel='stylesheet' id='codecolorer-css'  href='../../../../wp-content/plugins/codecolorer/codecolorere2dc.css?ver=0.9.9' type='text/css' media='screen' />
<link rel='stylesheet' id='column-styles-css'  href='../../../../wp-content/plugins/ultimate-tinymce/css/column-stylee735.css?ver=3.4' type='text/css' media='all' />
<script type='text/javascript' src='../../../../wp-includes/js/comment-replye735.js?ver=3.4'></script>
<script type='text/javascript' src='../../../../wp-includes/js/jquery/jqueryba3a.js?ver=1.7.2'></script>
<script type='text/javascript' src='../../../../wp-content/themes/swatch/includes/js/slides.min.jquerye735.js?ver=3.4'></script>
<script type='text/javascript' src='../../../../wp-content/themes/swatch/includes/js/feedbacke735.js?ver=3.4'></script>
<script type='text/javascript' src='../../../../wp-includes/js/jquery/ui/jquery.ui.core.mine8d2.js?ver=1.8.20'></script>
<script type='text/javascript' src='../../../../wp-includes/js/jquery/ui/jquery.ui.widget.mine8d2.js?ver=1.8.20'></script>
<script type='text/javascript' src='../../../../wp-includes/js/jquery/ui/jquery.ui.tabs.mine8d2.js?ver=1.8.20'></script>
<script type='text/javascript' src='../../../../wp-content/themes/swatch/includes/js/generale735.js?ver=3.4'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Digital IO Functions' href='../digital-io-functions/index.html' />
<link rel='next' title='Launchpad Board' href='../../../../launchpad_board/index.html' />
<meta name="generator" content="WordPress 3.4" />
<link rel='canonical' href='index.html' />

<!-- Theme version -->
<meta name="generator" content="Swatch 1.4.8" />
<meta name="generator" content="WooFramework 5.3.12" />
<!-- Woo Custom Styling -->
<style type="text/css">
body { background-color: #dae1e3 !important; }
body { background-image: none; }
#wrapper a, .post-more a:link, .post-meta a:link, .post p.tags a:link, #wrapper #comments .reply a { color: #702670 !important; }
#wrapper a, .post-more a:visited, .post-meta a:visited, .post p.tags a:visited, #wrapper #comments .reply a:visited { color: #702670 !important; }
#wrapper a:hover, .post-more a:hover, .post-meta a:hover, .post p.tags a:hover, #wrapper #comments .reply a:hover { color: #c250c2 !important; }
a.button, #commentform #submit, #contact-page .submit { background: #297d53; border-color: #297d53 !important; }
a.button:hover, a.button.hover, a.button.active, #commentform #submit:hover, #contact-page .submit:hover { background: #297d53 !important; opacity: 0.9; }
</style>

<!-- Google Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Ubuntu:r,b,i,bi|Ubuntu+Mono" rel="stylesheet" type="text/css" />
<!-- Woo Custom Typography -->
<style type="text/css">
body { font:normal 18px/1.5em 'Ubuntu Mono', arial, sans-serif;color:#444444 !important; }
#navigation, #navigation .nav a { font:normal 16px/1.4em 'Ubuntu', arial, sans-serif;color:#FFFFFF !important; !important; }
.post .title { font:bold 30px/1em Arial, sans-serif;color:#88AC0B !important; }
.post-meta { font:normal 12px/1em "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", sans-serif;color:#444444 !important; }
.entry, .entry p { font:normal 14px/1.5em Arial, sans-serif;color:#444444 !important; } h1, h2, h3, h4, h5, h6 { font-family: Arial, sans-serif, arial, sans-serif; }
#sidebar .widget h3 { font:bold 16px/1em 'Ubuntu', arial, sans-serif;color:#444444 !important; }
#footer-widgets .widget h3 { font:normal 10px/1em Arial, sans-serif;color:#AAA8A8 !important; }
</style>


<!-- Alt Stylesheet -->
<link href="../../../../wp-content/themes/swatch/styles/green.css" rel="stylesheet" type="text/css" />

<!-- Custom Favicon -->
<link rel="shortcut icon" href="../../../../wp-content/uploads/2012/01/mpy_favicon1.ico"/>

<!-- Woo Shortcodes CSS -->
<link href="../../../../wp-content/themes/swatch/functions/css/shortcodes.css" rel="stylesheet" type="text/css" />

<!-- Custom Stylesheet -->
<link href="../../../../wp-content/themes/swatch/custom.css" rel="stylesheet" type="text/css" />

</head>

<body class="page page-id-682 page-parent page-child parent-pageid-400 page-template-default unknown two-col-right">

<div id="wrapper">

		<div id="header">
		<div class="col-full">
			<div id="logo">
		    							<a href="../../../../index.html" title="Mpy Projects for the Launchpad MSP430 Microcontroller">
					<img src="../../../../../mpyprojects.com/uploads/3/0/5/7/3057496/1332218336.png" alt="Mpy Projects" />
				</a>
	        
	        				<span class="site-title"><a href="../../../../index.html">Mpy Projects</a></span>
	        				<span class="site-description">Mpy Projects for the Launchpad MSP430 Microcontroller</span>

			</div><!-- /#logo -->

			<div id="navigation" class="fr">

				<ul id="main-nav" class="nav fl"><li id="menu-item-1789" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1789"><a href="../../../../index.html">Home</a></li>
<li id="menu-item-48" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-48"><a href="../../../../hardware/index.html">hardware</a></li>
<li id="menu-item-49" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-49"><a href="../../../index.html">software</a>
<ul class="sub-menu">
	<li id="menu-item-258" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-258"><a href="../../../getting_started/index.html">Getting Started</a></li>
	<li id="menu-item-58" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-58"><a href="../../../mpy-editor/index.html">mpy Editor</a></li>
	<li id="menu-item-45" class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor menu-item-45"><a href="../../index.html">mpy Language</a></li>
</ul>
</li>
<li id="menu-item-46" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-46"><a href="../../../../projects/index.html">projects</a></li>
<li id="menu-item-51" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-51"><a href="../../../../download/index.html">download</a></li>
<li id="menu-item-47" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-47"><a href="http://www.43oh.com/forum/viewforum.php?f=39">forum</a></li>
<li id="menu-item-1587" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1587"><a href="http://www.43oh.com/forum/viewforum.php?f=39">contact</a></li>
</ul>				
			</div><!-- /#navigation -->

		</div><!--/.col-full-->
	</div><!--/#header-->       
    <div id="content" class="page col-full">
		<div id="main" class="col-left">
		           
		  			

                                                                                    
            <div class="post-682 page type-page status-publish hentry drop-shadow lifted">

			    <h1 class="title">Pulse Functions</h1>

                <div class="entry">
                	<p>The mpy <strong>pulse</strong> functions are used to control the <strong>MSP430</strong> timer counter circuits.</p>
<p>The <strong>MSP430</strong> Microcontroller chip contains timer counter circuits which can be used to generate square wave signals on the output pins.   A square wave signal is a voltage that goes from <strong>0v</strong> to the supply voltage and then from the supply voltage back to <strong>0v</strong>.</p>
<p><a href="../../../../wp-content/uploads/2012/06/square-_wave4.gif"><img class="alignnone size-full wp-image-1715" title="square _wave" src="../../../../wp-content/uploads/2012/06/square-_wave4.gif" alt="" width="502" height="190" /></a></p>
<p>The square wave signal has two properties that can be varied</p>
<ul>
<li>The<strong> period</strong>, this is how long it takes to repeat the square wave</li>
<li>The <strong>width</strong>, this is the high part of the square wave, and is often called the <strong>pulse width</strong></li>
</ul>
<p>Square wave signals or pulse  signals are useful for controlling output devices such as Servo Motors or Loadspeakers. They can be controlled by varying the pulse width and pulse period properties using the <strong>Pulse</strong> Functions.  Varying the pulse width is called <strong>Pulse Width Modulation</strong> or <strong>PWM</strong> (see here for a description of how to use and control Servo Motors using the <strong>pulse</strong> functions).</p>
<h3>mpy Pulse Functions</h3>
<p><strong></strong><strong></strong><strong></strong><strong></strong>4 different <strong>Pulse</strong> functions are used to setup the pulse output and allow the <strong>period</strong> and the <strong>pulse</strong> width to be varied.</p>
<ul>
<li><a href="pulse_enable/index.html"><strong>pulse_enable( timer )</strong> </a> enables a timer counter circuit<br />
<strong></strong></li>
<li><strong><a href="pulse_period/index.html">pulse_period( timer,  clocks )</a> </strong> sets the square wave period</li>
<li><strong><a href="pulse_width/index.html">pulse_width( timer, clocks )</a> </strong> sets the square wave pulse width</li>
<li><a href="dirpulse/index.html"><strong>dirpulse( pinname )</strong></a> sets the output pin as a pulse output</li>
</ul>
<p>In the above commands the parameter<strong> timer</strong> refers to the number of the timer counter.  There are a maximum of three timer circuits numbered <strong>0, 1,</strong> or<strong> 2</strong>.  Only the largest <strong>MSP430G2553</strong> microcontroller has three timers. The other chips only have one.</p>
<p>The parameter<strong> clocks</strong> is the number of clock periods for the <strong>period</strong> or <strong>width</strong>. The <strong>MSP430</strong> clock frequency is normally set   to <strong>1MHz</strong>,  which means that each microcontroller clock period is <strong>1us</strong> long.  Therefore the time for the <strong>period</strong> and <strong>width</strong> is specified in <strong>microseconds</strong>. (If a different clock frequency is used the period and width need to be scaled accordingly)</p>
<p>Before a timer counter can be used it needs to be enabled using the <a href="pulse_enable/index.html"><strong>pulse_enable( timer )</strong></a> function.</p>
<p>The timer counter signals can be connected to the output pins using the <a href="dirpulse/index.html"><strong>dirpulse( pinname )</strong></a> function. However only some of the output pins can be used for as pulse outputs.</p>
<p>Example:<br />
<strong></strong></p>
<pre>pulse_enable(0)                # Enables the Pulse 0 circuit
dirpulse(P1_2)                 # Enables the Pulse 0 output onto pin P1_2
pulse_period(0, 20000)         # Output a pulse that repeats every 20,000 clocks
pulse_width(0, 1500)           # Output a pulse that has a width of 1500 clocks</pre>
<p>This <strong>mpy</strong>  example shows how to set up <strong>Timer0</strong> to output a pulse onto output pin <strong>P1_2</strong>. The pulse repeats every is <strong>20000</strong> clocks (<strong>20,000us</strong> or <strong>20ms</strong>) and the pulse width is <strong>1500</strong> clocks (<strong>1500us</strong> or <strong>1.5ms</strong>). The period and pulse width of 1.5ms  is suitable for controlling many types of servo motor,  it will typically position the servo near it&#8217;s center position. The output squarewave pulse signal looks like this:</p>
<p><a href="../../../../wp-content/uploads/2012/06/square-_wave_example.gif"><img class="alignnone size-full wp-image-1740" title="square _wave_example" src="../../../../wp-content/uploads/2012/06/square-_wave_example.gif" alt="" width="504" height="190" /></a></p>
<p>If you have access to an <strong>oscilloscope</strong>, you can connect it to the output pin <strong>P1_2</strong> and see the output square wave pulse directly. You can also connect it up to a servo motor and try changing the pulse width to see the motor change position. (see here for details on servo motors)</p>
<h3>Pulse Timer Counter Block</h3>
<p><a href="../../../../wp-content/uploads/2012/06/timer_counter.gif"><img class="alignnone size-full wp-image-1719" title="timer_counter" src="../../../../wp-content/uploads/2012/06/timer_counter.gif" alt="" width="587" height="407" /></a></p>
<p>The block diagram above shows how the different timer outputs are routed to the different output pins.</p>
<p>This is a very simplified diagram of the actual timer counter circuits,  The <strong>mpy pulse</strong> functions only configures the basic pulse mode.  In reality the timer counters are more complex and  have many modes of operation. Using the <strong>mpy register commands</strong> it is possible to use all the timer counter modes.</p>
<p>All the <strong>MSP430</strong> microcontroller chips have general purpose  timer counter circuits. The are called the <strong>Timer_A</strong> block by TI, but in <strong>mpy</strong> they are called the <strong>Pulse</strong> Timers, this is because they are mainly used in <strong>mpy</strong> to produce squrewave pulse signals.  The <strong>Timer_A</strong> block is described fully in the <strong><a href="http://www.ti.com/litv/pdf/slau144i">TI datasheet</a></strong>.</p>
<p>If you find that you need to use more timer counter outputs than are available you can always use the regular <strong>dirout()</strong> and <strong>out()</strong> function to set and reset the output pins directly from software. This is called <strong>bit-banging</strong>.  Doing this however means that your<strong></strong> program will spend most of its time continuously writing to the output pins. This will not leave many cpu cycles to do other things.</p>

					               	</div><!-- /.entry -->

				                
            </div><!-- /.post -->
            
                                                            
		  
        
		</div><!-- /#main -->

        	
<div id="sidebar" class="col-right">

	    <div class="primary">
		<div id="nav_menu-2" class="widget widget_nav_menu"><div class="menu-mpy_language_menu-container"><ul id="menu-mpy_language_menu" class="menu"><li id="menu-item-747" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-747"><a href="../digital-io-functions/index.html">Digital IO Functions</a>
<ul class="sub-menu">
	<li id="menu-item-748" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-748"><a href="../digital-io-functions/inp/index.html">inp( pinname )</a></li>
	<li id="menu-item-749" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-749"><a href="../digital-io-functions/out/index.html">out( pinname, value )</a></li>
	<li id="menu-item-752" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-752"><a href="../digital-io-functions/dirinp/index.html">dirinp( pinname )</a></li>
	<li id="menu-item-753" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-753"><a href="../digital-io-functions/dirinpu/index.html">dirinpu( pinname )</a></li>
	<li id="menu-item-754" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-754"><a href="../digital-io-functions/dirinpd/index.html">dirinpd( pinname)</a></li>
	<li id="menu-item-755" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-755"><a href="../digital-io-functions/dirout/index.html">dirout( pinname )</a></li>
</ul>
</li>
<li id="menu-item-756" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-756"><a href="../adc_io_functions/index.html">ADC IO Functions</a>
<ul class="sub-menu">
	<li id="menu-item-757" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-757"><a href="../adc_io_functions/adc_enable/index.html">adc_enable( )</a></li>
	<li id="menu-item-758" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-758"><a href="../adc_io_functions/adc/index.html">adc( pinname )</a></li>
</ul>
</li>
<li id="menu-item-759" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-759"><a href="../print_functions/index.html">Print Functions</a>
<ul class="sub-menu">
	<li id="menu-item-761" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-761"><a href="../print_functions/print/index.html">print( value1, value2, &#8230; )</a></li>
</ul>
</li>
<li id="menu-item-764" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-682 current_page_item menu-item-764"><a href="index.html">Pulse Functions</a>
<ul class="sub-menu">
	<li id="menu-item-765" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-765"><a href="pulse_enable/index.html">pulse_enable( timer )</a></li>
	<li id="menu-item-767" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-767"><a href="pulse_period/index.html">pulse_period( pulse, clocks )</a></li>
	<li id="menu-item-769" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-769"><a href="pulse_width/index.html">pulse_width( pulse, clocks )</a></li>
	<li id="menu-item-773" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-773"><a href="dirpulse/index.html">dirpulse( portpin )</a></li>
</ul>
</li>
<li id="menu-item-776" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-776"><a href="../software_functions/index.html">Software Functions</a>
<ul class="sub-menu">
	<li id="menu-item-984" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-984"><a href="../software_functions/halt/index.html">halt( )</a></li>
	<li id="menu-item-778" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-778"><a href="../software_functions/wait/index.html">wait(milliseconds)</a></li>
	<li id="menu-item-777" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-777"><a href="../software_functions/random/index.html">random(seed)</a></li>
</ul>
</li>
<li id="menu-item-779" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-779"><a href="../interrupt_functions/index.html">Interrupt Functions</a>
<ul class="sub-menu">
	<li id="menu-item-780" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-780"><a href="../interrupt_functions/tbd/index.html">TBD</a></li>
</ul>
</li>
</ul></div></div>		           
	</div>        
		
</div><!-- /#sidebar -->

    </div><!-- /#content -->
		
	
	<div id="footer">
		<div class="col-full">

		<div id="copyright" class="col-left">
					<p>Mpy Projects &copy; 2013. All Rights Reserved.</p>
				</div>

		<div id="credit" class="col-right">
        			<p>Powered by <a href="http://www.wordpress.org/">WordPress</a>. Designed by <a href="http://www.woothemes.com/"><img src="../../../../wp-content/themes/swatch/images/woothemes.png" width="74" height="19" alt="Woo Themes" /></a></p>
				</div></div>
	</div><!-- /#footer  -->
</div><!-- /#wrapper -->
</body>

<!-- Mirrored from www.mpyprojects.com/software/mpy-language/mpy_functions/pulse-functions/ by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 03 Apr 2013 03:34:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
<!-- This Quick Cache file was built for (  www.mpyprojects.com/software/mpy-language/mpy_functions/pulse-functions/ ) in 4.87656 seconds, on Apr 3rd, 2013 at 3:27 am UTC. -->
<!-- This Quick Cache file will automatically expire ( and be re-built automatically ) on Apr 3rd, 2013 at 3:28 am UTC -->